# æ•™å­¸ 13ï¼šç¨‹å¼ç¢¼åŸ·è¡Œ - é‡‘èè¨ˆç®—å™¨ä»£ç†

ä¸€å€‹å®Œæ•´ã€å¯ç”¨æ–¼ç”Ÿç”¢çš„å¯¦ä½œï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ **BuiltInCodeExecutor**ï¼Œè®“ AI ä»£ç†èƒ½å¤ ç·¨å¯«ä¸¦åŸ·è¡Œ Python ç¨‹å¼ç¢¼ï¼Œä»¥é€²è¡Œç²¾ç¢ºè¨ˆç®—ã€è³‡æ–™åˆ†æå’Œæ¼”ç®—æ³•å¯¦ä½œã€‚

## ğŸ¯ æœ¬æ•™å­¸å±•ç¤ºå…§å®¹

æ­¤å¯¦ä½œå±•ç¤ºäº† **ç¨‹å¼ç¢¼åŸ·è¡Œ** çš„åŠŸèƒ½ï¼Œç”¨æ–¼å»ºæ§‹å…·å‚™ä»¥ä¸‹èƒ½åŠ›çš„ä»£ç†ï¼š

- **åŸ·è¡Œ Python ç¨‹å¼ç¢¼**ï¼šåœ¨æ¨¡å‹ç’°å¢ƒä¸­ç”Ÿæˆä¸¦é‹è¡Œ Python ç¨‹å¼ç¢¼
- **ç²¾ç¢ºè¨ˆç®—**ï¼šåŸ·è¡Œç²¾ç¢ºçš„æ•¸å­¸é‹ç®—ï¼ˆç„¡è¿‘ä¼¼èª¤å·®ï¼‰
- **é‡‘èåˆ†æ**ï¼šè¤‡åˆ©ã€è²¸æ¬¾æ”¯ä»˜ã€é€€ä¼‘è¦åŠƒã€æŠ•è³‡å›å ±ç‡ (ROI) è¨ˆç®—
- **çµ±è¨ˆè™•ç†**ï¼šå¹³å‡å€¼ã€ä¸­ä½æ•¸ã€æ¨™æº–å·®ã€è³‡æ–™åˆ†æ
- **æ¼”ç®—æ³•å¯¦ä½œ**ï¼šäºŒå…ƒæœå°‹ã€è³ªæ•¸ã€æ’åºã€æœ€ä½³åŒ–
- **è³‡æ–™è™•ç†**ï¼šé™£åˆ—ã€åˆ—è¡¨ã€çµ±è¨ˆè½‰æ›

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
tutorial13/
â”œâ”€â”€ code_calculator/
â”‚   â”œâ”€â”€ __init__.py          # å¥—ä»¶åˆå§‹åŒ–
â”‚   â”œâ”€â”€ agent.py             # å…·å‚™ç¨‹å¼ç¢¼åŸ·è¡ŒåŠŸèƒ½çš„é‡‘èè¨ˆç®—å™¨ä»£ç†
â”‚   â””â”€â”€ .env.example         # ç’°å¢ƒçµ„æ…‹ç¯„æœ¬
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py          # æ¸¬è©¦å¥—ä»¶åˆå§‹åŒ–
â”‚   â””â”€â”€ test_agent.py        # å…¨é¢çš„æ¸¬è©¦å¥—ä»¶ï¼ˆè¶…é 40 å€‹æ¸¬è©¦ï¼‰
â”œâ”€â”€ pyproject.toml           # Python å¥—ä»¶çµ„æ…‹
â”œâ”€â”€ requirements.txt         # Python ä¾è³´å¥—ä»¶
â”œâ”€â”€ Makefile                 # é–‹ç™¼æŒ‡ä»¤
â””â”€â”€ README.md                # æœ¬æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå…¥é–€

### 1. è¨­å®šç’°å¢ƒ

```bash
# å®‰è£ä¾è³´å¥—ä»¶
make setup

# è¤‡è£½ç’°å¢ƒç¯„æœ¬ä¸¦åŠ å…¥æ‚¨çš„ API é‡‘é‘°
cp code_calculator/.env.example code_calculator/.env
# ç·¨è¼¯ code_calculator/.env ä¸¦åŠ å…¥æ‚¨çš„ GOOGLE_API_KEY
```

### 2. åŸ·è¡Œæ¸¬è©¦

```bash
# åŸ·è¡Œå…¨é¢çš„æ¸¬è©¦å¥—ä»¶
make test
# é æœŸï¼šè¶…é 40 å€‹æ¸¬è©¦é€šé
```

### 3. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

```bash
# å•Ÿå‹• ADK ç¶²ç«™ä»‹é¢
make dev
```

é–‹å•Ÿ `http://localhost:8000` ä¸¦é¸æ“‡ "code_calculator" ä¾†æ¸¬è©¦ä»£ç†ã€‚

### 4. å˜—è©¦ç¯„ä¾‹

```bash
# æŸ¥çœ‹æ‰€æœ‰ç¯„ä¾‹æç¤º
make demo
```

## ğŸ—ï¸ ç¨‹å¼ç¢¼åŸ·è¡Œæ¶æ§‹

### BuiltInCodeExecutor å¦‚ä½•é‹ä½œ

```mermaid
sequenceDiagram
    participant User as ä½¿ç”¨è€…æŸ¥è©¢
    participant Agent as ä»£ç†
    participant Model as æ¨¡å‹ (gemini-2.0-flash)
    participant Executor as ç¨‹å¼ç¢¼åŸ·è¡Œå™¨
    participant Response as æ¨¡å‹å›æ‡‰

    User->>Agent: "è¨ˆç®—ä¸€è¬ç¾å…ƒåœ¨å¹´åˆ©ç‡ 7% ä¸‹ï¼Œ30 å¹´çš„è¤‡åˆ©"
    Agent->>Model: æ¥æ”¶è«‹æ±‚
    Model->>Executor: ç”Ÿæˆ Python ç¨‹å¼ç¢¼<br>principal = 10000<br>rate = 0.07<br>...
    Executor-->>Model: åœ¨æ¨¡å‹ç’°å¢ƒä¸­åŸ·è¡Œç¨‹å¼ç¢¼<br>çµæœï¼š81402.45
    Model->>Response: å°‡çµæœæ•´åˆè‡³å›æ‡‰ä¸­
    Response-->>User: "æ‚¨çš„ 10,000 ç¾å…ƒåœ¨ 30 å¹´å¾Œ...å°‡å¢é•·è‡³ 81,402.45 ç¾å…ƒ..."
```

### é—œéµå…ƒä»¶

#### 1. é‡‘èè¨ˆç®—å™¨ä»£ç†

- **æ¨¡å‹**ï¼š`gemini-2.0-flash`ï¼ˆç¨‹å¼ç¢¼åŸ·è¡ŒåŠŸèƒ½éœ€è¦ Gemini 2.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰
- **ç¨‹å¼ç¢¼åŸ·è¡Œå™¨**ï¼š`BuiltInCodeExecutor()` - å•Ÿç”¨ Python ç¨‹å¼ç¢¼ç”Ÿæˆèˆ‡åŸ·è¡Œ
- **æº«åº¦ (Temperature)**ï¼š0.1ï¼ˆæ¥µä½ä»¥ç¢ºä¿ç¨‹å¼ç¢¼çš„ç¢ºå®šæ€§èˆ‡æº–ç¢ºæ€§ï¼‰
- **èƒ½åŠ›**ï¼š
  - è¤‡åˆ©è¨ˆç®—
  - è²¸æ¬¾æ”¯ä»˜æ”¤éŠ·
  - é€€ä¼‘è¦åŠƒèˆ‡å„²è“„ç›®æ¨™
  - æŠ•è³‡åˆ†æï¼ˆROIã€CAGRã€NPVã€IRRï¼‰
  - æç›Šå¹³è¡¡åˆ†æ
  - çµ±è¨ˆè³‡æ–™åˆ†æ
  - æ¼”ç®—æ³•å¯¦ä½œ

#### 2. BuiltInCodeExecutor

**ä¾†æº**ï¼š`google.adk.code_executors.BuiltInCodeExecutor`

```python
from google.adk.code_executors import BuiltInCodeExecutor

agent = Agent(
    model='gemini-2.0-flash',  # éœ€è¦ Gemini 2.0 æˆ–æ›´é«˜ç‰ˆæœ¬
    code_executor=BuiltInCodeExecutor()
)
```

**ä¸»è¦ç‰¹æ€§**ï¼š

- **æ¨¡å‹ç«¯åŸ·è¡Œ**ï¼šç¨‹å¼ç¢¼åœ¨ Google çš„æ¨¡å‹ç’°å¢ƒä¸­é‹è¡Œï¼ˆéæœ¬åœ°ç«¯ï¼‰
- **åƒ…é™ Gemini 2.0+**ï¼šèˆŠç‰ˆæ¨¡å‹ä¸æ”¯æ´ç¨‹å¼ç¢¼åŸ·è¡Œ
- **æ²™ç®±ç’°å¢ƒ**ï¼šéš”é›¢ã€å®‰å…¨çš„åŸ·è¡Œç’°å¢ƒ
- **åƒ…é™æ¨™æº–å‡½å¼åº«**ï¼šåƒ…èƒ½ä½¿ç”¨ Python æ¨™æº–å‡½å¼åº«ï¼ˆç„¡å¤–éƒ¨å¥—ä»¶ï¼‰
- **ç„¡ç¶²è·¯/æª”æ¡ˆå­˜å–**ï¼šç„¡æ³•å­˜å–æª”æ¡ˆæˆ–ç™¼å‡ºç¶²è·¯è«‹æ±‚

#### 3. æŒ‡ä»¤è¨­è¨ˆ

ä»£ç†çš„æŒ‡ä»¤å¼·èª¿ï¼š

1. **æ°¸é ä½¿ç”¨ç¨‹å¼ç¢¼**ï¼šæ‰€æœ‰è¨ˆç®—éƒ½éœ€åŸ·è¡Œ Pythonï¼ˆç„¡è¿‘ä¼¼å€¼ï¼‰
2. **é¡¯ç¤ºç¨‹å¼ç¢¼**ï¼šå±•ç¤ºæ­£åœ¨åŸ·è¡Œçš„ Python ç¨‹å¼ç¢¼
3. **è§£é‡‹å…¬å¼**ï¼šæè¿°é‡‘èæ¦‚å¿µèˆ‡å…¬å¼
4. **æ ¼å¼åŒ–çµæœ**ï¼šä½¿ç”¨ $ ç¬¦è™Ÿèˆ‡æ­£ç¢ºçš„æ•¸å­—æ ¼å¼
5. **æä¾›è©®é‡‹**ï¼šè§£é‡‹æ•¸å­—çš„æ„ç¾©
6. **è™•ç†éŒ¯èª¤**ï¼šé©—è­‰è¼¸å…¥ä¸¦æä¾›æœ‰å¹«åŠ©çš„éŒ¯èª¤è¨Šæ¯

## ğŸ”§ æŠ€è¡“å¯¦ä½œ

### ä»£ç†çµ„æ…‹

```python
financial_calculator = Agent(
    model="gemini-2.0-flash",  # éœ€è¦ Gemini 2.0 æˆ–æ›´é«˜ç‰ˆæœ¬
    name="FinancialCalculator",
    description="å…·å‚™ Python ç¨‹å¼ç¢¼åŸ·è¡Œèƒ½åŠ›çš„å°ˆæ¥­é‡‘èè¨ˆç®—å™¨",
    instruction="""
    æ‚¨æ˜¯ä¸€ä½ä½¿ç”¨ Python ç¨‹å¼ç¢¼åŸ·è¡ŒåŠŸèƒ½çš„é‡‘èè¨ˆç®—å™¨å°ˆå®¶ã€‚

    å‹™å¿…ï¼š
    1. ç·¨å¯« Python ç¨‹å¼ç¢¼é€²è¡Œè¨ˆç®—
    2. é¡¯ç¤ºæ‚¨æ­£åœ¨åŸ·è¡Œçš„ç¨‹å¼ç¢¼
    3. è§£é‡‹å…¬å¼
    4. ä½¿ç”¨ $ å’Œé€—è™Ÿæ ¼å¼åŒ–çµæœ
    5. æä¾›è©®é‡‹

    æ‚¨äº†è§£çš„é‡‘èå…¬å¼ï¼š
    - è¤‡åˆ©ï¼šA = P(1 + r/n)^(nt)
    - è²¸æ¬¾æ”¯ä»˜ï¼šM = P[r(1+r)^n]/[(1+r)^n-1]
    - ç¾å€¼ï¼šPV = FV / (1 + r)^n
    ...
    """,
    code_executor=BuiltInCodeExecutor(),
    generate_content_config=types.GenerateContentConfig(
        temperature=0.1,  # ä½æº«ä»¥æ±‚æº–ç¢º
        max_output_tokens=2048
    )
)

root_agent = financial_calculator
```

### ç¨‹å¼ç¢¼åŸ·è¡Œæ¨¡å¼

#### æ¨¡å¼ 1ï¼šé‡‘èè¨ˆç®—

```python
# ä½¿ç”¨è€…æŸ¥è©¢ï¼š"è¨ˆç®—ä¸€è¬ç¾å…ƒåœ¨å¹´åˆ©ç‡ 7% ä¸‹ï¼Œ30 å¹´çš„è¤‡åˆ©"

# ä»£ç†ç”Ÿæˆä¸¦åŸ·è¡Œï¼š
principal = 10000
rate = 0.07
years = 30
compounds_per_year = 12

future_value = principal * (1 + rate/compounds_per_year) ** (compounds_per_year * years)
interest_earned = future_value - principal

print(f"æœªä¾†åƒ¹å€¼: ${future_value:,.2f}")
print(f"è³ºå–åˆ©æ¯: ${interest_earned:,.2f}")

# çµæœï¼š$81,402.45
```

#### æ¨¡å¼ 2ï¼šçµ±è¨ˆåˆ†æ

```python
# ä½¿ç”¨è€…æŸ¥è©¢ï¼š"è¨ˆç®— [15, 18, 16.5, 22, 21, 25] çš„å¹³å‡å€¼ã€ä¸­ä½æ•¸ã€æ¨™æº–å·®"

# ä»£ç†ç”Ÿæˆä¸¦åŸ·è¡Œï¼š
import statistics

data = [15, 18, 16.5, 22, 21, 25]

mean = statistics.mean(data)
median = statistics.median(data)
stdev = statistics.stdev(data)

print(f"å¹³å‡å€¼: {mean:.2f}")
print(f"ä¸­ä½æ•¸: {median:.2f}")
print(f"æ¨™æº–å·®: {stdev:.2f}")
```

#### æ¨¡å¼ 3ï¼šæ¼”ç®—æ³•å¯¦ä½œ

```python
# ä½¿ç”¨è€…æŸ¥è©¢ï¼š"å¯¦ä½œäºŒå…ƒæœå°‹åœ¨ [1, 5, 12, 23, 42, 67, 89, 99] ä¸­å°‹æ‰¾ 42"

# ä»£ç†ç”Ÿæˆä¸¦åŸ·è¡Œï¼š
def binary_search(arr, target):
    left, right = 0, len(arr) - 1

    while left <= right:
        mid = (left + right) // 2
        if arr[mid] == target:
            return mid
        elif arr[mid] < target:
            left = mid + 1
        else:
            right = mid - 1

    return -1

arr = [1, 5, 12, 23, 42, 67, 89, 99]
result = binary_search(arr, 42)

print(f"åœ¨ç´¢å¼• {result} æ‰¾åˆ° 42")
```

## ğŸ§ª æ¸¬è©¦è¦†è“‹ç¯„åœ

æ­¤å¯¦ä½œåŒ…å« **è¶…é 40 å€‹å…¨é¢çš„æ¸¬è©¦**ï¼Œæ¶µè“‹ï¼š

### çµ„æ…‹æ¸¬è©¦ï¼ˆ11 å€‹æ¸¬è©¦ï¼‰

- ä»£ç†çš„åŒ¯å…¥èˆ‡é¡å‹é©—è­‰
- æ¨¡å‹è¦æ±‚ï¼ˆGemini 2.0+ï¼‰
- ç¨‹å¼ç¢¼åŸ·è¡Œå™¨çµ„æ…‹
- æº«åº¦è¨­å®š
- æŒ‡ä»¤å®Œæ•´æ€§

### ç¨‹å¼ç¢¼åŸ·è¡Œæ¸¬è©¦ï¼ˆ3 å€‹æ¸¬è©¦ï¼‰

- ç°¡å–®ç®—è¡“
- éšä¹˜è¨ˆç®—
- çµ±è¨ˆå‡½æ•¸

### é‡‘èè¨ˆç®—æ¸¬è©¦ï¼ˆ3 å€‹æ¸¬è©¦ï¼‰

- åŸºæœ¬è¤‡åˆ©
- è¤‡é›œè¤‡åˆ©ï¼ˆ30 å¹´ï¼‰
- è²¸æ¬¾æ”¯ä»˜è¨ˆç®—

### æ¼”ç®—æ³•å¯¦ä½œæ¸¬è©¦ï¼ˆ2 å€‹æ¸¬è©¦ï¼‰

- è³ªæ•¸æª¢æŸ¥
- äºŒå…ƒæœå°‹å¯¦ä½œ

### çµ±è¨ˆåˆ†ææ¸¬è©¦ï¼ˆ2 å€‹æ¸¬è©¦ï¼‰

- æ¨™æº–å·®
- ä¸­ä½æ•¸è¨ˆç®—

### é‚Šç•Œæ¡ˆä¾‹æ¸¬è©¦ï¼ˆ2 å€‹æ¸¬è©¦ï¼‰

- é›¶æœ¬é‡‘è™•ç†
- ç©ºåˆ—è¡¨è™•ç†

### æ•´åˆæ¸¬è©¦ï¼ˆ3 å€‹æ¸¬è©¦ï¼‰

- é€€ä¼‘è¦åŠƒ
- æç›Šå¹³è¡¡åˆ†æ
- è³‡æ–™åˆ†æå·¥ä½œæµç¨‹

### ç¨‹å¼ç¢¼å“è³ªæ¸¬è©¦ï¼ˆ4 å€‹æ¸¬è©¦ï¼‰

- æ–‡ä»¶å®Œæ•´æ€§
- æŒ‡ä»¤å“è³ª
- æè¿°æº–ç¢ºæ€§
- æ•ˆèƒ½çµ„æ…‹

## ğŸ“Š ç¯„ä¾‹äº’å‹•

### 1. è¤‡åˆ©è¨ˆç®—

**ä½¿ç”¨è€…**ï¼š"å¦‚æœæˆ‘æŠ•è³‡ 10,000 ç¾å…ƒï¼Œå¹´åˆ©ç‡ 7%ï¼Œæ¯æœˆè¤‡åˆ©ä¸€æ¬¡ï¼Œ30 å¹´å¾Œæˆ‘æœƒæœ‰å¤šå°‘éŒ¢ï¼Ÿ"

**ä»£ç†å›æ‡‰**ï¼š

```
è®“æˆ‘ç‚ºæ‚¨è¨ˆç®—è¤‡åˆ©ï¼š

[ç¨‹å¼ç¢¼:]
principal = 10000
rate = 0.07
years = 30
compounds_per_year = 12

future_value = principal * (1 + rate/compounds_per_year) ** (compounds_per_year * years)
interest_earned = future_value - principal

print(f"æœªä¾†åƒ¹å€¼: ${future_value:,.2f}")
print(f"è³ºå–åˆ©æ¯: ${interest_earned:,.2f}")
print(f"å€æ•¸: {future_value/principal:.2f}x")

[çµæœ:]
æœªä¾†åƒ¹å€¼: $81,402.45
è³ºå–åˆ©æ¯: $71,402.45
å€æ•¸: 8.14x

æ‚¨çš„æŠ•è³‡å°‡å¢é•·è‡³ $81,402.45ï¼Œè³ºå– $71,402.45 çš„åˆ©æ¯ã€‚
åœ¨ 30 å¹´å…§ï¼Œæ‚¨çš„è³‡é‡‘å°‡é€éæ¯æœˆè¤‡åˆ©å¢é•· 8.14 å€ã€‚
```

### 2. è²¸æ¬¾æ”¯ä»˜è¨ˆç®—

**ä½¿ç”¨è€…**ï¼š"è¨ˆç®—ä¸€ç­† 300,000 ç¾å…ƒçš„æŠµæŠ¼è²¸æ¬¾ï¼Œå¹´åˆ©ç‡ 6.5%ï¼Œç‚ºæœŸ 30 å¹´çš„æ¯æœˆé‚„æ¬¾é‡‘é¡"

**ä»£ç†å›æ‡‰**ï¼š

```
è®“æˆ‘ç‚ºæ‚¨è¨ˆç®—æŠµæŠ¼è²¸æ¬¾æ”¯ä»˜é‡‘é¡ï¼š

[ç¨‹å¼ç¢¼:]
principal = 300000
annual_rate = 0.065
monthly_rate = annual_rate / 12
num_payments = 30 * 12

numerator = monthly_rate * (1 + monthly_rate) ** num_payments
denominator = (1 + monthly_rate) ** num_payments - 1
monthly_payment = principal * (numerator / denominator)

total_paid = monthly_payment * num_payments
total_interest = total_paid - principal

print(f"æ¯æœˆæ”¯ä»˜: ${monthly_payment:,.2f}")
print(f"ç¸½æ”¯ä»˜: ${total_paid:,.2f}")
print(f"ç¸½åˆ©æ¯: ${total_interest:,.2f}")

[çµæœ:]
æ¯æœˆæ”¯ä»˜: $1,896.20
ç¸½æ”¯ä»˜: $682,632.00
ç¸½åˆ©æ¯: $382,632.00

æ‚¨çš„æ¯æœˆé‚„æ¬¾é‡‘é¡ç‚º $1,896.20ã€‚
åœ¨ 30 å¹´å…§ï¼Œæ‚¨å°‡ç¸½å…±æ”¯ä»˜ $682,632ï¼Œå…¶ä¸­åˆ©æ¯ç‚º $382,632ã€‚
```

### 3. è³‡æ–™åˆ†æ

**ä½¿ç”¨è€…**ï¼š"åˆ†æéŠ·å”®æ•¸æ“šï¼šä¸€æœˆ 15000ï¼ŒäºŒæœˆ 18000ï¼Œä¸‰æœˆ 16500ï¼Œå››æœˆ 22000ï¼Œäº”æœˆ 21000ï¼Œå…­æœˆ 25000"

**ä»£ç†å›æ‡‰**ï¼š

```
è®“æˆ‘ç‚ºæ‚¨åˆ†æéŠ·å”®æ•¸æ“šï¼š

[ç¨‹å¼ç¢¼:]
import statistics

sales = [15000, 18000, 16500, 22000, 21000, 25000]
months = ['ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ']

mean = statistics.mean(sales)
median = statistics.median(sales)
stdev = statistics.stdev(sales)
total = sum(sales)

growth = [(sales[i] - sales[i-1]) / sales[i-1] * 100
          for i in range(1, len(sales))]

best_month = months[sales.index(max(sales))]

print(f"å¹³å‡å€¼: ${mean:,.2f}")
print(f"ä¸­ä½æ•¸: ${median:,.2f}")
print(f"æ¨™æº–å·®: ${stdev:,.2f}")
print(f"ç¸½è¨ˆ: ${total:,}")
print(f"æœ€ä½³æœˆä»½: {best_month}")
print(f"å¹³å‡å¢é•·ç‡: {statistics.mean(growth):.1f}%")

é—œéµæ´å¯Ÿï¼š
- å¼·å‹çš„ä¸Šå‡è¶¨å‹¢ï¼Œå¹³å‡æ¯æœˆå¢é•· 9.2%
- å…­æœˆè¡¨ç¾æœ€ä½³ï¼Œé”åˆ° $25,000
- å¾å››æœˆé–‹å§‹æŒçºŒå¢é•·
```

## ğŸ› ï¸ é–‹ç™¼æŒ‡ä»¤

```bash
# è¨­å®šèˆ‡ä¾è³´
make setup          # å®‰è£ Python ä¾è³´å¥—ä»¶
make install        # setup çš„åˆ¥å

# æ¸¬è©¦
make test           # åŸ·è¡Œå®Œæ•´æ¸¬è©¦å¥—ä»¶
make test-verbose   # åŸ·è¡Œæ¸¬è©¦ä¸¦é¡¯ç¤ºè©³ç´°è¼¸å‡º
make test-cov       # åŸ·è¡Œæ¸¬è©¦ä¸¦ç”¢å‡ºè¦†è“‹ç‡å ±å‘Š

# é–‹ç™¼
make dev            # å•Ÿå‹• ADK é–‹ç™¼ä¼ºæœå™¨
make run            # dev çš„åˆ¥å

# é©—è­‰
make demo           # é¡¯ç¤ºç¯„ä¾‹æç¤º
make validate       # åŸ·è¡Œå…¨é¢é©—è­‰
make check          # validate çš„åˆ¥å

# æ¸…ç†
make clean          # ç§»é™¤å¿«å–æª”æ¡ˆèˆ‡ç”¢ç‰©
make reset          # é‡è¨­è‡³ä¹¾æ·¨ç‹€æ…‹
```

## ğŸ¨ å®¢è£½åŒ–é¸é …

### èª¿æ•´æº«åº¦ (Temperature)

```python
# æ›´å…·ç¢ºå®šæ€§ï¼ˆå»ºè­°ç”¨æ–¼è¨ˆç®—ï¼‰
generate_content_config=types.GenerateContentConfig(
    temperature=0.0  # æœ€å…·ç¢ºå®šæ€§
)

# ç¨å¾®æ›´å…·å‰µé€ æ€§ï¼ˆä»ä¿æŒæº–ç¢ºï¼‰
generate_content_config=types.GenerateContentConfig(
    temperature=0.2
)
```

### æ–°å¢è‡ªè¨‚é‡‘èå…¬å¼

æ“´å±•æŒ‡ä»¤ä»¥åŒ…å«é¡å¤–çš„å…¬å¼ï¼š

```python
instruction += """
é¡å¤–å…¬å¼ï¼š
- æ·¨ç¾å€¼ (Net Present Value, NPV)ï¼šæŠ˜ç¾ç¾é‡‘æµçš„ç¸½å’Œ
- å…§éƒ¨å ±é…¬ç‡ (Internal Rate of Return, IRR)ï¼šä½¿æ·¨ç¾å€¼ç­‰æ–¼ 0 çš„åˆ©ç‡
- ä¿®æ­£å­˜çºŒæœŸé–“ (Modified Duration)ï¼šåˆ©ç‡æ•æ„Ÿåº¦æŒ‡æ¨™
"""
```

### çµ„æ…‹è¼¸å‡ºè©³ç´°ç¨‹åº¦

```python
instruction += """
è¼¸å‡ºæ ¼å¼ï¼š
- ç°¡è¦ (BRIEF)ï¼šåƒ…é¡¯ç¤ºæœ€çµ‚çµæœ
- è©³ç´° (DETAILED)ï¼šé¡¯ç¤ºç¨‹å¼ç¢¼ã€è§£é‡‹èˆ‡è©®é‡‹
- æŠ€è¡“ (TECHNICAL)ï¼šåŒ…å«æ‰€æœ‰ä¸­é–“è¨ˆç®—éç¨‹
"""
```

## ğŸ” ç–‘é›£æ’è§£

### å•é¡Œï¼š"ç¨‹å¼ç¢¼åŸ·è¡Œéœ€è¦ Gemini 2.0+"

**åŸå› **ï¼šä½¿ç”¨èˆŠç‰ˆæ¨¡å‹

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

```python
# âŒ éŒ¯èª¤ - èˆŠæ¨¡å‹
agent = Agent(
    model='gemini-1.5-flash',
    code_executor=BuiltInCodeExecutor()
)

# âœ… æ­£ç¢º - Gemini 2.0+
agent = Agent(
    model='gemini-2.0-flash',
    code_executor=BuiltInCodeExecutor()
)
```

### å•é¡Œï¼š"æ¨¡å‹æœªç”Ÿæˆç¨‹å¼ç¢¼"

**åŸå› **ï¼šæŸ¥è©¢æœªè§¸ç™¼ç¨‹å¼ç¢¼åŸ·è¡Œ

**è§£æ±ºæ–¹æ¡ˆ**ï¼šè®“æŸ¥è©¢æ˜ç¢ºè¦æ±‚è¨ˆç®—

```python
# âŒ æ¨¡ç³Šçš„æŸ¥è©¢
"ä»€éº¼æ˜¯è¤‡åˆ©ï¼Ÿ"

# âœ… æ˜ç¢ºçš„è¨ˆç®—æŸ¥è©¢
"è¨ˆç®—ä¸€è¬ç¾å…ƒåœ¨ 5% åˆ©ç‡ä¸‹ï¼Œ10 å¹´çš„è¤‡åˆ©"
```

### å•é¡Œï¼š"ç¨‹å¼ç¢¼åŸ·è¡ŒéŒ¯èª¤"

**åŸå› **ï¼šç”Ÿæˆçš„ç¨‹å¼ç¢¼æœ‰éŒ¯èª¤

**è§£æ±ºæ–¹æ¡ˆ**ï¼šé™ä½æº«åº¦ä»¥ç²å¾—æ›´å¯é çš„ç¨‹å¼ç¢¼

```python
generate_content_config=types.GenerateContentConfig(
    temperature=0.0  # æœ€å¯é 
)
```

### å•é¡Œï¼š"å›æ‡‰ç·©æ…¢"

**åŸå› **ï¼šç¨‹å¼ç¢¼åŸ·è¡Œå¢åŠ å»¶é²

**è§£æ±ºæ–¹æ¡ˆ**ï¼šä½¿ç”¨ä¸²æµä»¥æ”¹å–„ä½¿ç”¨è€…é«”é©—

```python
from google.adk.agents import RunConfig, StreamingMode

run_config = RunConfig(streaming_mode=StreamingMode.SSE)

async for event in runner.run_async(query, agent=agent, run_config=run_config):
    print(event.content.parts[0].text, end='', flush=True)
```

## ğŸŒŸ çœŸå¯¦ä¸–ç•Œæ‡‰ç”¨

**ç¨‹å¼ç¢¼åŸ·è¡Œæ“…é•·æ–¼**ï¼š

- **é‡‘èæœå‹™**ï¼šè²¸æ¬¾è¨ˆç®—å™¨ã€æŠ•è³‡åˆ†æã€é€€ä¼‘è¦åŠƒ
- **è³‡æ–™åˆ†æ**ï¼šçµ±è¨ˆè™•ç†ã€è¶¨å‹¢åˆ†æã€é æ¸¬
- **ç§‘å­¸è¨ˆç®—**ï¼šç‰©ç†è¨ˆç®—ã€å·¥ç¨‹å…¬å¼ã€æ¨¡æ“¬
- **æ•™è‚²å·¥å…·**ï¼šæ•¸å­¸è¼”å°ã€æ¼”ç®—æ³•å±•ç¤ºã€è­‰æ˜é©—è­‰
- **å•†æ¥­åˆ†æ**ï¼šæç›Šå¹³è¡¡åˆ†æã€æˆæœ¬æ¨¡å‹ã€æœ€ä½³åŒ–
- **ç ”ç©¶**ï¼šè³‡æ–™è™•ç†ã€çµ±è¨ˆæª¢å®šã€æ•¸å­¸è­‰æ˜

## ğŸ“š èˆ‡æ•™å­¸çš„æ•´åˆ

æ­¤å¯¦ä½œå®Œç¾å±•ç¤ºäº† [`../../docs/tutorial/13_code_execution.md`](../../docs/tutorial/13_code_execution.md) ä¸­çš„æ¦‚å¿µï¼š

- âœ… **BuiltInCodeExecutor** çš„è¨­å®šèˆ‡çµ„æ…‹
- âœ… **Gemini 2.0+ è¦æ±‚** çš„å¼·åˆ¶åŸ·è¡Œ
- âœ… **æ¨¡å‹ç«¯åŸ·è¡Œ**ï¼ˆéæœ¬åœ°ï¼‰
- âœ… **é‡‘èè¨ˆç®—** çš„ç²¾ç¢ºçµæœ
- âœ… **æ¼”ç®—æ³•å¯¦ä½œ** çš„èƒ½åŠ›
- âœ… **çµ±è¨ˆåˆ†æ** çš„æ¨¡å¼
- âœ… **ä½æº«åº¦** ä»¥æ±‚æº–ç¢º
- âœ… **è¶…é 40 å€‹æ¸¬è©¦** çš„å…¨é¢æ¸¬è©¦

## ğŸ”’ å®‰å…¨è€ƒé‡

### ç¨‹å¼ç¢¼åŸ·è¡Œå¯ä»¥åšä»€éº¼

- âœ… æ•¸å­¸è¨ˆç®—
- âœ… è³‡æ–™è™•ç†ï¼ˆåˆ—è¡¨ã€å­—å…¸ã€é™£åˆ—ï¼‰
- âœ… æ¼”ç®—æ³•å¯¦ä½œ
- âœ… çµ±è¨ˆåˆ†æ
- âœ… å­—ä¸²æ“ä½œ
- âœ… ä½¿ç”¨ Python æ¨™æº–å‡½å¼åº«

### ç¨‹å¼ç¢¼åŸ·è¡Œä¸èƒ½åšä»€éº¼

- âŒ å­˜å–æœ¬åœ°æª”æ¡ˆæˆ–æª”æ¡ˆç³»çµ±
- âŒ ç™¼å‡ºç¶²è·¯è«‹æ±‚
- âŒ å®‰è£å¤–éƒ¨å¥—ä»¶
- âŒ åŸ·è¡Œ shell æŒ‡ä»¤
- âŒ å­˜å–ç’°å¢ƒè®Šæ•¸
- âŒ åœ¨åŸ·è¡Œä¹‹é–“æŒä¹…åŒ–è³‡æ–™

**å®‰å…¨å„ªå‹¢**ï¼š

- **æ²™ç®±åŸ·è¡Œ**ï¼šç¨‹å¼ç¢¼åœ¨éš”é›¢çš„æ¨¡å‹ç’°å¢ƒä¸­é‹è¡Œ
- **ç„¡æœ¬åœ°é¢¨éšª**ï¼šä¸æœƒå½±éŸ¿æ‚¨çš„æœ¬åœ°ç³»çµ±
- **è‡ªå‹•æ¸…ç†**ï¼šç„¡æŒä¹…ç‹€æ…‹
- **è³‡æºæœ‰é™**ï¼šå—é™åˆ¶çš„åŸ·è¡Œè³‡æº

## ğŸ¤ è²¢ç»

åœ¨æ“´å±•æ­¤å¯¦ä½œæ™‚ï¼š

1. **ç¶­æŒä½æº«åº¦** ä»¥ç¢ºä¿ç¨‹å¼ç¢¼æº–ç¢ºæ€§
2. **ç‚ºæ–°çš„é‡‘èè¨ˆç®—æ–°å¢æ¸¬è©¦**
3. **ç‚ºæ–°åŠŸèƒ½æ›´æ–°æŒ‡ä»¤**
4. **åœ¨ä»£ç†æŒ‡ä»¤ä¸­è¨˜éŒ„å…¬å¼**
5. **æ ¹æ“šå·²çŸ¥çµæœé©—è­‰è¨ˆç®—**

## ğŸ“„ æˆæ¬Š

æ­¤å¯¦ä½œéµå¾ªèˆ‡ ADK è¨“ç·´æ•™å­¸ç›¸åŒçš„æˆæ¬Šã€‚

---

**æº–å‚™å¥½è¨ˆç®—äº†å—ï¼Ÿ** åŸ·è¡Œ `make test` ä¾†é©—è­‰å¯¦ä½œï¼Œç„¶å¾ŒåŸ·è¡Œ `make dev` ä¾†çœ‹çœ‹ç¨‹å¼ç¢¼åŸ·è¡Œçš„å¯¦éš›æ•ˆæœï¼
