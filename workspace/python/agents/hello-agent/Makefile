# Tutorial 01: Hello World Agent
# Simple Makefile for getting started quickly

.PHONY: help setup dev test clean demo

# Default target - show help
help:
	@echo "ğŸš€ æ•™å­¸ 01ï¼šHello World Agent"
	@echo ""
	@echo "å¿«é€Ÿé–‹å§‹æŒ‡ä»¤ (Quick Start):"
	@echo "  make setup     - å®‰è£ç›¸ä¾å¥—ä»¶ (Install dependencies)"
	@echo "  make dev       - å•Ÿå‹• hello ä»£ç† (Start the hello agent)"
	@echo "  make demo      - åŸ·è¡Œç°¡æ˜“ç¤ºç¯„ (Run a quick demo)"
	@echo ""
	@echo "é€²éšæŒ‡ä»¤ (Advanced):"
	@echo "  make test      - åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦ (Run all tests)"
	@echo "  make clean     - æ¸…ç†ç”¢ç”Ÿæª”æ¡ˆ (Clean up generated files)"
	@echo ""
	@echo "ğŸ’¡ ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Ÿè«‹ä¾åºåŸ·è¡Œ: make setup && make dev"

# Install dependencies
setup:
	@echo "ğŸ“¦ å®‰è£ç›¸ä¾å¥—ä»¶ä¸­..."
	pip install -r requirements.txt
	pip install -e .
	@echo "âœ… å®‰è£å®Œæˆï¼åŸ·è¡Œ 'make dev' å•Ÿå‹•ä»£ç†ã€‚"

# Start the hello agent
dev: check-env
	@echo "ğŸ¤– æ­£åœ¨å•Ÿå‹• Hello World Agent..."
	@echo "ğŸ“± è«‹åœ¨ç€è¦½å™¨é–‹å•Ÿ http://localhost:8000"
	@echo "ğŸ¯ ä¸‹æ‹‰é¸å–®é¸æ“‡ 'hello_agent'"
	adk web

# Run a quick demo
demo: check-env
	@echo "ğŸ§ª åŸ·è¡Œ Hello World ç¤ºç¯„..."
	@echo ""
	@echo "ğŸ’¬ å¯åœ¨ ADK Web ä»‹é¢å˜—è©¦ä»¥ä¸‹æç¤ºè©ï¼š"
	@echo "   â€¢ 'Hello! Who are you?' (ä½ æ˜¯èª°)"
	@echo "   â€¢ 'What can you do?' (ä½ èƒ½åšä»€éº¼)"
	@echo "   â€¢ 'Tell me a fun fact' (çµ¦æˆ‘ä¸€å€‹æœ‰è¶£äº‹å¯¦)"
	@echo ""
	@echo "âœ… ç¤ºç¯„å·²å°±ç·’ï¼ç€è¦½ http://localhost:8000"

# Run tests
test: check-env
	@echo "ğŸ§ª åŸ·è¡Œæ¸¬è©¦ä¸­..."
	pytest tests/ -v --tb=short

# Clean up
clean:
	@echo "ğŸ§¹ æ¸…ç†ä¸­..."
	find . -type f -name "*.pyc" -delete
	find . -type d -name "__pycache__" -delete
	rm -rf .pytest_cache/
	@echo "âœ… æ¸…ç†å®Œæˆï¼"

# Check environment (internal use)
check-env:
	@if [ -z "$$GOOGLE_API_KEY" ] && [ -z "$$GOOGLE_APPLICATION_CREDENTIALS" ]; then \
		echo "âŒ éŒ¯èª¤ï¼šå°šæœªè¨­å®šé©—è­‰è³‡è¨Š (Authentication not configured)"; \
		echo ""; \
		echo "è«‹é¸æ“‡ä»¥ä¸‹å…¶ä¸­ä¸€ç¨®é©—è­‰æ–¹å¼ï¼š"; \
		echo ""; \
		echo "ğŸ”‘ æ–¹å¼ 1 - API Key (Gemini API)ï¼š"; \
		echo "   export GOOGLE_API_KEY=ä½ çš„_API_Key"; \
		echo "   ç”³è«‹é‡‘é‘°ï¼šhttps://aistudio.google.com/app/apikey"; \
		echo ""; \
		echo "ğŸ” æ–¹å¼ 2 - Service Account (VertexAI)ï¼š"; \
		echo "   export GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json"; \
		echo "   export GOOGLE_CLOUD_PROJECT=your_project_id"; \
		echo "   å»ºç«‹æ†‘è­‰ï¼šhttps://console.cloud.google.com/iam-admin/serviceaccounts"; \
		echo ""; \
		exit 1; \
	fi