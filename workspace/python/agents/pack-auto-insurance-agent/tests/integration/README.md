# 測試案例說明 - Integration Tests

## 簡介

此文件包含了 `integration` 目錄下的整合測試案例說明。這些測試旨在驗證代理（Agent）與伺服器（Server）之間的協作，以及串流回應等核心功能。

## 代理串流測試 (`tests/integration/test_agent.py`)

此部分涵蓋對代理串流功能的整合測試。

| 群組 | 測試案例編號 | 描述 | 前置條件 | 測試步驟 | 測試數據 | 預期結果 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **代理功能** | **TC-INT-001** | 驗證代理串流功能 | 代理已正確配置 | 1. 建立記憶體會話<br>2. 建立 Runner<br>3. 發送使用者訊息<br>4. 執行 Runner 並收集事件 | 訊息: "Why is the sky blue?" | 1. 接收到至少一個事件<br>2. 事件中包含文本內容 |

## 伺服器端對端測試 (`tests/integration/test_server_e2e.py`)

此部分涵蓋對伺服器 API 端點的端對端測試。

| 群組 | 測試案例編號 | 描述 | 前置條件 | 測試步驟 | 測試數據 | 預期結果 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **API 測試** | **TC-INT-002** | 聊天串流功能測試 | 伺服器已啟動並就緒 | 1. 建立會話<br>2. 發送聊天訊息<br>3. 解析 SSE 事件 | 訊息: "Hi!" | 1. 狀態碼為 200<br>2. 接收到有效的 SSE 事件 |
| **API 測試** | **TC-INT-003** | 聊天串流錯誤處理測試 | 伺服器已啟動並就緒 | 1. 發送格式錯誤的資料 | 無效的 message 格式 | 狀態碼為 422 |
| **API 測試** | **TC-INT-004** | 反饋收集功能測試 | 伺服器已啟動並就緒 | 1. 發送反饋資料 | 評分: 4, 內容: "Great response!" | 狀態碼為 200 |
