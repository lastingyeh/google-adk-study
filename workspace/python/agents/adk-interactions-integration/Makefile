.PHONY: help setup clean test demo dev

help:
	@echo "ADK Interactions Integration - å¯ç”¨æŒ‡ä»¤"
	@echo "=================================================="
	@echo ""
	@echo "make setup       å®‰è£ä¾è³´å¥—ä»¶ä¸¦æº–å‚™ç’°å¢ƒ"
	@echo "make test        åŸ·è¡Œå–®å…ƒæ¸¬è©¦"
	@echo "make dev         å•Ÿå‹• ADK ç¶²é ä»‹é¢"
	@echo "make demo        åŸ·è¡Œæ¼”ç¤º"
	@echo "make clean       ç§»é™¤å¿«å–æª”æ¡ˆèˆ‡ç”¢ç‰©"
	@echo ""

setup:
	pip install -r requirements.txt
	pip install -e .
	cp adk_interactions_agent/.env.example adk_interactions_agent/.env 2>/dev/null || true
	@echo ""
	@echo "âœ… è¨­å®šå®Œæˆï¼"
	@echo ""
	@echo "ä¸‹ä¸€æ­¥ï¼š"
	@echo "1. æ–°å¢žæ‚¨çš„ GOOGLE_API_KEY è‡³ adk_interactions_agent/.env"
	@echo "   æˆ–è¨­å®šï¼šexport GOOGLE_API_KEY='your-key-here'"
	@echo "2. åŸ·è¡Œ 'make test' ä»¥é©—è­‰å¯¦ä½œ"
	@echo "3. åŸ·è¡Œ 'make dev' ä»¥å•Ÿå‹• ADK ç¶²é ä»‹é¢"
	@echo ""

dev:
	@echo ""
	@echo "ðŸš€ æ­£åœ¨å•Ÿå‹• ADK ç¶²é ä»‹é¢..."
	@echo ""
	@echo "ðŸ“ æ­¤ä»£ç†å±•ç¤ºäº†ï¼š"
	@echo "   â€¢ å…·å‚™ Interactions API å¾Œç«¯çš„ ADK"
	@echo "   â€¢ ä¼ºæœå™¨ç«¯ç‹€æ…‹ç®¡ç†"
	@echo "   â€¢ å·¥å…·å”èª¿ (Tool orchestration)"
	@echo ""
	@echo "é–‹å•Ÿ http://localhost:8000 ä¸¦é¸æ“‡ 'adk_interactions_agent'"
	@echo ""
	adk web

test:
	@echo ""
	@echo "ðŸ§ª æ­£åœ¨åŸ·è¡Œ ADK Interactions Integration æ¸¬è©¦..."
	@echo ""
	@pytest tests/ -v --tb=short
	@echo ""
	@echo "âœ… æ¸¬è©¦é©—è­‰é …ç›®ï¼š"
	@echo "   â€¢ ä»£ç† (Agent) è¨­å®š"
	@echo "   â€¢ å·¥å…· (Tool) å®šç¾©"
	@echo "   â€¢ ADK æ•´åˆæ¨¡å¼"
	@echo ""

demo:
	@echo ""
	@echo "ðŸ”¬ ADK Interactions Integration æ¼”ç¤º"
	@echo "====================================="
	@echo ""
	python -m adk_interactions_agent.demo
	@echo ""

clean:
	find . -type d -name __pycache__ -exec rm -rf {} + 2>/dev/null || true
	find . -type d -name .pytest_cache -exec rm -rf {} + 2>/dev/null || true
	find . -type f -name "*.pyc" -delete
	rm -rf .coverage htmlcov build dist *.egg-info
	@echo "âœ… å·²æ¸…é™¤å¿«å–æª”æ¡ˆ"

# é‡é»žæ‘˜è¦
#
# - **æ ¸å¿ƒæ¦‚å¿µ**ï¼šè‡ªå‹•åŒ–å°ˆæ¡ˆç®¡ç†è…³æœ¬ï¼Œç°¡åŒ–é–‹ç™¼ã€æ¸¬è©¦èˆ‡éƒ¨ç½²æµç¨‹ã€‚
# - **é—œéµæŠ€è¡“**ï¼šMake, pip, pytest, ADK CLIã€‚
# - **é‡è¦çµè«–**ï¼šé€éŽæ¨™æº–åŒ–æŒ‡ä»¤ç¢ºä¿ç’°å¢ƒä¸€è‡´æ€§èˆ‡æ“ä½œä¾¿åˆ©æ€§ã€‚
# - **è¡Œå‹•é …ç›®**ï¼šåˆæ¬¡ä½¿ç”¨è«‹å‹™å¿…åŸ·è¡Œ `make setup` ä¸¦è¨­å®š API Keyã€‚
#
# æµç¨‹åœ– (Setup æµç¨‹)
# ```mermaid
# graph TD
#     A[é–‹å§‹ make setup] --> B[å®‰è£ requirements.txt]
#     B --> C[å®‰è£ç•¶å‰å¥—ä»¶ (editable mode)]
#     C --> D{æª¢æŸ¥ .env æ˜¯å¦å­˜åœ¨}
#     D -->|å¦| E[è¤‡è£½ .env.example åˆ° .env]
#     D -->|æ˜¯| F[è·³éŽè¤‡è£½]
#     E --> G[é¡¯ç¤ºå®Œæˆè¨Šæ¯èˆ‡ä¸‹ä¸€æ­¥é©Ÿ]
#     F --> G
# ```
