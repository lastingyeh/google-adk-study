# 詳細測試案例範本

## 簡介

此文件提供了一個詳細的測試案例範本，旨在為專案建立清晰、一致且全面的測試文件。使用此範本可以幫助開發者和測試人員標準化測試流程，確保所有關鍵功能都得到充分的驗證。

## 整合測試 (`tests/integration/test_agent.py`)

此部分涵蓋對代理程式串流功能的整合測試。

| 群組 | 測試案例編號 | 描述 | 前置條件 | 測試步驟 | 測試數據 | 預期結果 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **代理串流** | **TC-AGENT-001** | 測試代理是否回傳有效的串流回應 | `InMemorySessionService` 初始化 | 1. 建立 Session<br>2. 初始化 Runner<br>3. 執行 `runner.run` | 訊息: "Why is the sky blue?" | 收到至少一個事件，且包含文字內容 |

## 伺服器端對端測試 (`tests/integration/test_server_e2e.py`)

此部分涵蓋對伺服器 API 端點的端對端測試，包括串流與非串流聊天、錯誤處理及回饋收集。

| 群組 | 測試案例編號 | 描述 | 前置條件 | 測試步驟 | 測試數據 | 預期結果 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **聊天串流** | **TC-E2E-001** | 使用 A2A JSON-RPC 協定測試聊天串流功能 | 伺服器已啟動 | 1. 發送 POST 請求至 `/a2a/app/`<br>2. 解析串流回應<br>3. 驗證最終狀態與 Artifact 內容 | 訊息: "Hi!" (串流請求) | 回應狀態 200，包含最終完成狀態及文字 Artifact |
| **非串流聊天** | **TC-E2E-002** | 使用 A2A JSON-RPC 協定測試非串流聊天功能 | 伺服器已啟動 | 1. 發送 POST 請求至 `/a2a/app/`<br>2. 解析 JSON 回應<br>3. 驗證 Task 狀態與 Artifact 內容 | 訊息: "Hi!" (非串流請求) | 回應狀態 200，Task 狀態完成且包含文字 Artifact |
| **錯誤處理** | **TC-E2E-003** | 使用無效的 A2A 請求測試聊天串流錯誤處理 | 伺服器已啟動 | 1. 發送無效的 JSON-RPC 請求 (缺少部分欄位) | 無效的 JSON-RPC 請求 | 回應包含錯誤代碼 -32602 |
| **回饋收集** | **TC-E2E-004** | 測試回饋收集端點以確保其正確記錄收到的回饋 | 伺服器已啟動 | 1. 發送 POST 請求至 `/feedback` | 分數: 4, 文字: "Great response!" | 回應狀態 200 |
| **Agent Card** | **TC-E2E-005** | 測試 agent.json 檔案是否自動生成並正確提供服務 | 伺服器已啟動 | 1. 發送 GET 請求至 `.well-known/agent-card.json` | None | 回應狀態 200，JSON 包含必要欄位 (name, description 等) |

## 負載測試 (`tests/load_test/load_test.py`)

此部分涵蓋對伺服器進行負載測試的定義。

| 群組 | 測試案例編號 | 描述 | 前置條件 | 測試步驟 | 測試數據 | 預期結果 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **負載測試** | **TC-LOAD-001** | 使用 A2A 協定模擬聊天串流互動 | Locust 環境設定 | 1. 模擬使用者發送串流請求<br>2. 接收並解析串流事件<br>3. 記錄回應時間與錯誤 | 訊息: "Hello! What's the weather in New York?" | 成功接收回應，無錯誤 (4xx/5xx) |

## 單元測試 (`tests/unit/test_dummy.py`)

此部分涵蓋基本的單元測試。

| 群組 | 測試案例編號 | 描述 | 前置條件 | 測試步驟 | 測試數據 | 預期結果 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **基礎測試** | **TC-UNIT-001** | 佔位符測試 | None | 1. 執行斷言 `assert 1 == 1` | None | 測試通過 |

---

### **欄位說明**

*   **群組**: 測試案例所屬的功能子群組或類別。例如：`使用者身份驗證`、`API 整合`。
*   **測試案例編號**: 唯一的測試案例識別碼。建議格式為 `TC-[模組]-[編號]`，例如 `TC-AUTH-001`。
*   **描述**: 對此測試案例目標的簡潔說明。
*   **前置條件**: 執行測試前系統或環境必須處於的狀態。
*   **測試步驟**: 執行測試所需遵循的具體步驟，應清晰且可重複。
*   **測試數據**: 在測試步驟中使用的具體輸入數據。
*   **預期結果**: 在成功執行測試步驟後，系統應顯示的確切結果或狀態。
