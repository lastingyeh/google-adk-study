æ­¡è¿ä¾†åˆ°é€™å ‚æŠ€è¡“å¯¦æˆ°èª²ã€‚æˆ‘æ˜¯ä½ å€‘çš„è³‡æ·±æŠ€è¡“å°å¸«ã€‚åœ¨æŒæ¡äº† ADK çš„æ¶æ§‹èˆ‡ `RunConfig` çš„é…ç½®å¾Œï¼Œæˆ‘å€‘å¿…é ˆæ€è€ƒï¼šé€™äº›æŠ€è¡“å¦‚ä½•çœŸæ­£è½‰åŒ–ç‚ºè§£æ±ºç¾å¯¦å•é¡Œçš„ç”¢å“ï¼Ÿ

**ADK é›™å‘ä¸²æµ (Bidi-streaming)** çš„æ ¸å¿ƒåƒ¹å€¼åœ¨æ–¼å®ƒæ‰“ç ´äº†å‚³çµ± AIã€Œæå•ä¸¦ç­‰å¾…ã€çš„åƒµåŒ–æ¨¡å¼ï¼Œè½‰å‘äº†åƒé›»è©±äº¤è«‡èˆ¬è‡ªç„¶ã€å³æ™‚ä¸”å…·å‚™ä¸­æ–·èƒ½åŠ›çš„äº’å‹•æ¨¡å¼ã€‚ä»Šå¤©ï¼Œæˆ‘å€‘å°‡æ·±å…¥æ¢è¨ä¾†æºè³‡æ–™ä¸­æåˆ°çš„å¤šå…ƒæ‡‰ç”¨å ´æ™¯ï¼Œçœ‹çœ‹é€™é …æŠ€è¡“å¦‚ä½•é‡æ–°å®šç¾©äººæ©Ÿäº’å‹•ã€‚

---

### ğŸ“Œ ADK é›™å‘ä¸²æµï¼šå¯¦æˆ°æ‡‰ç”¨åœ°åœ–

1.  **å¾ã€Œé›»å­éƒµä»¶ã€åˆ°ã€Œé›»è©±äº¤è«‡ã€**ï¼šç†è§£é›™å‘ä¸²æµçš„æ‡‰ç”¨å“²å­¸ã€‚
2.  **ä¸‰å¤§æ ¸å¿ƒå¯¦æˆ°å ´æ™¯æ·±æ½›**ï¼š
    *   **å ´æ™¯ä¸€ï¼šé›¶å”®èˆ‡é›»å•†** â€”â€” å…·å‚™çœ¼ç›çš„ç§äººç®¡å®¶ã€‚
    *   **å ´æ™¯äºŒï¼šç¾å ´æœå‹™èˆ‡æŠ€è¡“å”åŠ©** â€”â€” å…æŒçš„å°ˆå®¶åŠ©æ‰‹ã€‚
    *   **å ´æ™¯ä¸‰ï¼šå®¢æˆ¶æœå‹™èˆ‡è¯çµ¡ä¸­å¿ƒ** â€”â€” å…·å‚™åŒç†å¿ƒçš„æƒ…ç·’æ„ŸçŸ¥ã€‚
3.  **å¤šæ¨¡æ…‹æ‡‰ç”¨è¦æ ¼å°æ¯”**ï¼šè¦–è¦ºã€éŸ³è¨Šèˆ‡å·¥å…·çš„èåˆè¦æ ¼ã€‚
4.  **ç¸½çµèˆ‡å¯¦æˆ°å»ºè­°**ï¼šå¦‚ä½•ç‚ºæ‚¨çš„æ¥­å‹™é¸æ“‡æ­£ç¢ºçš„é–‹ç™¼è·¯å¾‘ã€‚

---

### ä¸€ã€ å¯¦æˆ°å ´æ™¯é©…å‹•ï¼šå°‡æŠ½è±¡æŠ€è¡“è½‰åŒ–ç‚ºè§£æ±ºæ–¹æ¡ˆ

è®“æˆ‘å€‘é€éå°è©±å½¢å¼ï¼Œå‰–æä¾†æºè³‡æ–™ä¸­ä¸‰å€‹æœ€å…·ä»£è¡¨æ€§çš„æ‡‰ç”¨å ´æ™¯ã€‚

#### ğŸ’¡ å ´æ™¯ä¸€ï¼šé›»å­å•†å‹™èˆ‡å€‹äººåŒ–è³¼ç‰©ï¼ˆä»¥ Shopper's Concierge ç‚ºä¾‹ï¼‰
**æå•ï¼š** ã€Œåœ¨é›»å•†é ˜åŸŸï¼Œé›™å‘ä¸²æµå¦‚ä½•è§£æ±ºå‚³çµ±æœå°‹å¼•æ“ç„¡æ³•è™•ç†çš„ã€æ¨¡ç³Šéœ€æ±‚ã€ï¼Ÿã€
**è§£æï¼š** é—œéµåœ¨æ–¼ **Gemini åŸç”Ÿæ¨¡å‹çš„è·¨æ¨¡æ…‹ç†è§£èƒ½åŠ›**ã€‚
*   **è¦–è¦ºç’°å¢ƒæ„ŸçŸ¥**ï¼šAI ä¸å†è¢«å‹•ç­‰å¾…æŒ‡ä»¤ï¼Œè€Œæ˜¯èƒ½é€éæ”å½±æ©Ÿã€Œçœ‹è¦‹ã€ä½¿ç”¨è€…çš„æ¡Œé¢ã€‚ä¾‹å¦‚ï¼Œè¾¨è­˜å‡ºæ¡Œä¸Šçš„ç­†é›»ï¼Œé€²è€Œä¸»å‹•è©¢å•æ˜¯å¦éœ€è¦æ¨è–¦è¢å¹•æ¶æˆ–ç‡ˆå…·ã€‚
*   **æ¨¡ç³Šèªæ„æœå°‹**ï¼šä½¿ç”¨è€…å¯ä»¥èªªã€Œæ‰¾ä¸€å€‹å°æœ‰è·³èˆçš„äººçš„æ¯å­ã€ï¼ŒAI èƒ½å¾åƒè¬ä»¶å•†å“ä¸­è­˜åˆ¥æ„åœ–ï¼Œä¸¦åˆ†é¡æ¨è–¦å¦‚ã€Œè·³èˆåˆå”±ç·šé¦¬å…‹æ¯ã€ç­‰ç²¾é¸é …ç›®ã€‚
*   **æ·±åº¦ç ”ç©¶æ¨¡å¼**ï¼šç•¶çµæœéå¤šæ™‚ï¼ŒAI èƒ½ä¸»å‹•åŸ·è¡Œæ­¸ç´èˆ‡åˆ†é¡ï¼Œç¸®çŸ­æ¶ˆè²»è€…çš„æ±ºç­–è·¯å¾‘ã€‚

#### ğŸ’¡ å ´æ™¯äºŒï¼šç¾å ´æœå‹™èˆ‡æŠ€è¡“å”åŠ©
**æå•ï¼š** ã€Œå°æ–¼æ­£åœ¨ç¾å ´ç¶­ä¿®ç©ºèª¿çš„æŠ€è¡“äººå“¡ï¼ŒADK èƒ½æä¾›ä»€éº¼æ¨£çš„å…æŒå¹«åŠ©ï¼Ÿã€
**è§£æï¼š** é€™å±•ç¾äº† **å³æ™‚å½±ç‰‡ä¸²æµèˆ‡ä¸­æ–·æ©Ÿåˆ¶** çš„å¼·å¤§çµåˆã€‚
*   **å³æ™‚äº’å‹•**ï¼šæŠ€è¡“äººå“¡ä½©æˆ´æ™ºæ…§çœ¼é¡æˆ–æ‰‹æ©Ÿï¼Œå°‡å£“ç¸®æ©Ÿç™¼å‡ºçš„ç•°éŸ³èˆ‡å½±åƒç›´æ’­çµ¦ AIã€‚AI èƒ½è­˜åˆ¥å‹è™Ÿä¸¦å³æ™‚èª¿å‡ºè¨ºæ–·æµç¨‹åœ–ã€‚
*   **ä¸­æ–·æ”¯æ´**ï¼šå¦‚æœ AI æ­£åœ¨èªªéŒ¯èª¤çš„æ­¥é©Ÿï¼ŒæŠ€è¡“äººå“¡å¯ä»¥éš¨æ™‚æ’è©±ï¼šã€Œä¸ï¼Œé‚£æ˜¯ Model Yï¼Œä¸æ˜¯ Model Xã€ï¼ŒAI æœƒç«‹å³ä¿®æ­£æµç¨‹è€Œç„¡éœ€é‡æ–°é–‹å§‹ã€‚

#### ğŸ’¡ å ´æ™¯ä¸‰ï¼šå®¢æˆ¶æœå‹™èˆ‡è¯çµ¡ä¸­å¿ƒ
**æå•ï¼š** ã€Œé™¤äº†æ–‡å­—å®¢æœï¼ŒADK å¦‚ä½•åˆ©ç”¨ã€æƒ…æ„Ÿå°è©±ã€åŠŸèƒ½æå‡ä¸æ»¿æ„å®¢æˆ¶çš„é«”é©—ï¼Ÿã€
**è§£æï¼š** é€™æ¶‰åŠåˆ°äº† **åŸç”ŸéŸ³è¨Šæ¨¡å‹å°æƒ…ç·’ä¿¡è™Ÿçš„æ„ŸçŸ¥**ã€‚
*   **æƒ…æ„Ÿæ„ŸçŸ¥**ï¼šç•¶ä½¿ç”¨è€…ç”¨æ†¤æ€’çš„èªèª¿åæ˜ ç”¢å“ç‘•ç–µæ™‚ï¼ŒAI èƒ½åµæ¸¬åˆ°æ²®å–ªè¨Šè™Ÿï¼Œä¸¦è‡ªå‹•èª¿æ•´å›æ‡‰çš„èªæ°£èˆ‡æ­£å¼ç¨‹åº¦ï¼Œä»¥å…·å‚™åŒç†å¿ƒçš„æ–¹å¼é€²è¡Œå°è©±ã€‚
*   **å¤šæ¨¡æ…‹è¼”åŠ©**ï¼šå®¢æˆ¶å¯ä»¥ç›´æ¥å±•ç¤ºã€Œæ¼æ°´çš„å’–å•¡æ©Ÿã€åº•éƒ¨ï¼ŒAI åˆ©ç”¨è¦–è¦ºèƒ½åŠ›è­˜åˆ¥æ•…éšœé»ï¼ŒåŒæ­¥å®Œæˆé€€è²¨æµç¨‹ã€‚

---

### äºŒã€ é‚è¼¯å…·è±¡åŒ–ï¼šä¸åŒæ‡‰ç”¨å ´æ™¯çš„æŠ€è¡“è¦æ ¼éœ€æ±‚

ç‚ºäº†å¹«åŠ©ä½ é‡å°å ´æ™¯é¸æ“‡å°æ‡‰çš„æŠ€è¡“ï¼Œæˆ‘æ•´ç†äº†é€™ä»½å°ç…§è¡¨ï¼š

| æ‡‰ç”¨é ˜åŸŸ     | é—œéµæŠ€è¡“æ¨¡å¡Š        | å»ºè­°è¼¸å…¥è¦æ ¼        | æ ¸å¿ƒåƒ¹å€¼                     |
| :----------- | :------------------ | :------------------ | :--------------------------- |
| **é è·é†«ç™‚** | å½±åƒ/åœ–ç‰‡è¼¸å…¥       | é«˜è§£æåº¦åœ–ç‰‡/å½±æ ¼   | é€²è¡Œåˆæ­¥çš®è†šç‹€æ³åˆ†è¨ºèˆ‡è«®è©¢   |
| **é›»å•†ç®¡å®¶** | è¦–è¦ºæ„ŸçŸ¥ + å·¥å…·åŸ·è¡Œ | 1 FPS å½±ç‰‡ä¸²æµ      | ä¸»å‹•æ¨è–¦èˆ‡èƒŒæ™¯ç’°å¢ƒç›¸ç¬¦çš„å•†å“ |
| **æŠ€è¡“æ”¯æ´** | æ’å˜´åµæ¸¬ (VAD)      | 16kHz PCM éŸ³è¨Š      | å…æŒæ“ä½œï¼Œéš¨æ™‚ä¸­æ–·èˆ‡ä¿®æ­£æŒ‡ä»¤ |
| **é‡‘èæœå‹™** | è¢å¹•å…±äº« + æƒ…æ„Ÿå°è©± | æ–‡å­— + éŸ³è¨Šæ··åˆè¼¸å…¥ | è¨è«–å¸‚å ´è¶¨å‹¢ä¸¦æ¨¡æ“¬äº¤æ˜“å½±éŸ¿   |

---

### ä¸‰ã€ ä»£ç¢¼å³çœŸç†ï¼šå¯¦ç¾å¤šæ¨¡æ…‹æ‡‰ç”¨çš„ä¸Šæ¸¸æ ¸å¿ƒ

ä¸è«–æ‡‰ç”¨å ´æ™¯ç‚ºä½•ï¼Œåœ¨ **Phase 3ï¼ˆé›™å‘ä¸²æµæ´»èºæœŸï¼‰**ï¼Œæ‰€æœ‰çš„äº’å‹•éƒ½å§‹æ–¼ `LiveRequestQueue`ã€‚ä»¥ä¸‹æ˜¯ä¾†æºè³‡æ–™ä¸­è™•ç†éŸ³è¨Šã€æ–‡å­—èˆ‡åœ–ç‰‡è¼¸å…¥çš„ä¸Šæ¸¸ä»»å‹™ç¯„ä¾‹ï¼š

```python
# [å°å¸«é»è©•]ï¼šé€™æ˜¯å¯¦ç¾æ‰€æœ‰å¯¦æˆ°å ´æ™¯çš„ä¸Šæ¸¸å‹•è„ˆã€‚
# æˆ‘å€‘é€éä¸¦è¡Œä»»å‹™ï¼Œç¢ºä¿ä½¿ç”¨è€…èƒ½éš¨æ™‚ç™¼é€æ–‡å­—ã€éŸ³è¨Šæˆ–å½±åƒã€‚

async def upstream_task() -> None:
    """å¾ WebSocket æ¥æ”¶è¨Šæ¯ä¸¦ç™¼é€åˆ° LiveRequestQueueã€‚"""
    while True:
        message = await websocket.receive()

        # [é—œéµåœ¨æ–¼]ï¼šè™•ç†å³æ™‚éŸ³è¨Šæ•¸æ“š (å¦‚æŠ€è¡“æ”¯æ´å ´æ™¯)
        if "bytes" in message:
            audio_data = message["bytes"]
            # å¿…é ˆç¬¦åˆ 16kHz PCM è¦æ ¼
            audio_blob = types.Blob(mime_type="audio/pcm;rate=16000", data=audio_data)
            live_request_queue.send_realtime(audio_blob)

        # [é—œéµåœ¨æ–¼]ï¼šè™•ç†æ–‡å­—èˆ‡åœ–ç‰‡ (å¦‚é›»å•†æœå°‹å ´æ™¯)
        elif "text" in message:
            json_message = json.loads(message["text"])

            # ç™¼é€æ–‡å­—å…§å®¹
            if json_message.get("type") == "text":
                content = types.Content(parts=[types.Part(text=json_message["text"])])
                live_request_queue.send_content(content) #

            # ç™¼é€åœ–ç‰‡ (å¦‚é†«ç™‚æˆ–è³¼ç‰©è¾¨è­˜)
            elif json_message.get("type") == "image":
                image_data = base64.b64decode(json_message["data"])
                # å°‡åœ–ç‰‡ä½œç‚º Blob ä»¥å³æ™‚æ¨¡å¼ç™¼é€
                image_blob = types.Blob(mime_type="image/jpeg", data=image_data)
                live_request_queue.send_realtime(image_blob)
```

---

### ğŸ’¡ çŸ¥è­˜å»¶ä¼¸èˆ‡å¯¦æˆ°å°å¸«ç¸½çµ

åœ¨è¦åŠƒæ‡‰ç”¨å ´æ™¯ç¯„ä¾‹æ™‚ï¼Œä¾†æºè³‡æ–™æé†’æˆ‘å€‘ï¼š **ã€Œé›™å‘ä¸²æµä¸åƒ…æ˜¯æŠ€è¡“çš„å‡ç´šï¼Œæ›´æ˜¯äººæ©Ÿäº’å‹•å“²å­¸çš„è½‰è®Šã€**ã€‚

**å¯¦æˆ°ç¸½çµï¼š**
*   **æ‰“ç ´åƒµåŒ–æ¨¡å¼**ï¼šä¸å†æ˜¯ã€Œæå•-ç­‰å¾…-å›æ‡‰ã€ï¼Œè€Œæ˜¯å…è¨±ã€Œæ’å˜´ã€èˆ‡ã€Œæ¾„æ¸…ã€çš„è‡ªç„¶æµå‹•ã€‚
*   **è·¨æ¨¡æ…‹èåˆ**ï¼šæœ€å¼·å¤§çš„å ´æ™¯ï¼ˆå¦‚é›»å•†ç®¡å®¶ï¼‰é€šå¸¸çµåˆäº†è¦–è¦ºæ„ŸçŸ¥èˆ‡ä¸»å‹•å¼æ·±åº¦ç ”ç©¶ï¼Œè€Œä¸åƒ…åƒ…æ˜¯èªéŸ³å°è©±ã€‚
*   **å¹³å°é¸æ“‡**ï¼šå¦‚æœæ‚¨éœ€è¦æœ€é«˜çš„å°è©±è‡ªç„¶åº¦èˆ‡æƒ…æ„Ÿæ„ŸçŸ¥ï¼Œè«‹å‹™å¿…é¸æ“‡ **åŸç”ŸéŸ³è¨Šæ¨¡å‹ (Native Audio)**ã€‚
*   **ç’°å¢ƒé…ç½®**ï¼šé–‹ç™¼éšæ®µå¯ä½¿ç”¨ Gemini Live API é€²è¡ŒåŸå‹è¨­è¨ˆï¼›ç”Ÿç”¢éƒ¨ç½²å‰‡å»ºè­°è½‰å‘ Vertex AI Live API ä»¥ç²å–ä¼æ¥­ç´š SLAã€‚

é€é ADKï¼Œæ‚¨å¯ä»¥å°‡æ•¸æœˆçš„åŸºç¤è¨­æ–½é–‹ç™¼æ™‚é–“ç¸®çŸ­ç‚ºå®£å‘Šå¼é…ç½®ï¼Œå¾è€Œå°‡ç²¾åŠ›é›†ä¸­åœ¨å‰µé€ ä¸‹ä¸€å€‹æ”¹è®Šç”¢æ¥­çš„ AI ä»£ç†ç¨‹å¼æ‡‰ç”¨ã€‚

ğŸ·ï¸ `bidi-streaming`, `ai-agents`, `multi-modal-ai`, `gemini-live-api`, `real-world-applications`

**å»¶ä¼¸è³‡æºï¼š**
*   è‹¥è¦äº†è§£å…·é«”çš„éŸ³è¨Šè¦æ ¼èˆ‡ VAD é…ç½®ï¼Œè«‹åƒé–±ã€Šé–‹ç™¼æŒ‡å—ç¬¬ 5 éƒ¨åˆ†ï¼šå¦‚ä½•ä½¿ç”¨éŸ³è¨Šã€åœ–ç‰‡èˆ‡å½±ç‰‡ã€‹ã€‚
*   è‹¥è¦äº†è§£å¦‚ä½•ç®¡ç†é•·å°è©±æœƒè©±ï¼Œè«‹åƒé–±ã€Šç¬¬ 4 éƒ¨åˆ†ï¼šç†è§£ RunConfigã€‹ä¹‹ã€Œä¸Šä¸‹æ–‡è¦–çª—å£“ç¸®ã€ã€‚