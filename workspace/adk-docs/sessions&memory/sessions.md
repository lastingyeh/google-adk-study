# å°è©±ä¸Šä¸‹æ–‡ç°¡ä»‹ï¼šSessionã€State èˆ‡ Memory

ğŸ”” `æ›´æ–°æ—¥æœŸï¼š2026 å¹´ 1 æœˆ 5 æ—¥`

æœ‰æ„ç¾©çš„å¤šè¼ªå°è©±éœ€è¦ä»£ç†ï¼ˆAgentsï¼‰èƒ½å¤ ç†è§£ä¸Šä¸‹æ–‡ã€‚å°±åƒäººé¡ä¸€æ¨£ï¼Œå®ƒå€‘éœ€è¦è¨˜ä½å°è©±æ­·å²ï¼šäº†è§£å·²ç¶“èªªéå’Œåšéçš„äº‹æƒ…ï¼Œä»¥ç¶­æŒé€£è²«æ€§ä¸¦é¿å…é‡è¤‡ã€‚Agent Development Kit (ADK) é€é `Session`ã€`State` å’Œ `Memory` æä¾›çµæ§‹åŒ–çš„æ–¹å¼ä¾†ç®¡ç†é€™äº›ä¸Šä¸‹æ–‡ã€‚

> [!IMPORTANT]
> **é‡é»èªªæ˜**ï¼šADK å€åˆ†äº†ã€Œç•¶å‰äº’å‹•ã€ï¼ˆSession/Stateï¼‰èˆ‡ã€Œé•·æœŸçŸ¥è­˜ã€ï¼ˆMemoryï¼‰ï¼Œé€™è®“ä»£ç†èƒ½åŒæ™‚å…·å‚™çŸ­æœŸè¨˜æ†¶èˆ‡é•·æœŸçŸ¥è­˜åº«çš„èƒ½åŠ›ã€‚

## æ ¸å¿ƒæ¦‚å¿µ

å°‡æ‚¨èˆ‡ä»£ç†çš„ä¸åŒå°è©±å¯¦ä¾‹æƒ³åƒæˆä¸åŒçš„**å°è©±åŸ·è¡Œç·’ (Conversation Threads)**ï¼Œä¸¦å¯èƒ½èª¿ç”¨**é•·æœŸçŸ¥è­˜ (Long-term Knowledge)**ã€‚

1.  **`Session`**ï¼šç•¶å‰å°è©±åŸ·è¡Œç·’
    *   ä»£è¡¨ä½¿ç”¨è€…èˆ‡ä»£ç†ç³»çµ±ä¹‹é–“*å–®æ¬¡ã€æŒçºŒçš„äº’å‹•*ã€‚
    *   åŒ…å«è©²ç‰¹å®šäº’å‹•æœŸé–“ä»£ç†æ‰€æ¡å–çš„è¨Šæ¯å’Œå‹•ä½œçš„æ™‚é–“åºåˆ—ï¼ˆç¨±ç‚º `Events`ï¼‰ã€‚
    *   `Session` é‚„å¯ä»¥æŒæœ‰åƒ…åœ¨*æ­¤å°è©±æœŸé–“*ç›¸é—œçš„è‡¨æ™‚æ•¸æ“š (`State`)ã€‚

2.  **`State` (`session.state`)**ï¼šç•¶å‰å°è©±å…§çš„æ•¸æ“š
    *   å­˜å„²åœ¨ç‰¹å®š `Session` å…§çš„æ•¸æ“šã€‚
    *   ç”¨æ–¼ç®¡ç†*åƒ…*èˆ‡*ç•¶å‰æ´»å‹•*å°è©±åŸ·è¡Œç·’ç›¸é—œçš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼š*æ­¤æ¬¡èŠå¤©ä¸­*è³¼ç‰©è»Šå…§çš„ç‰©å“ã€*æ­¤æœƒè©±ä¸­*æåˆ°çš„ä½¿ç”¨è€…åå¥½ï¼‰ã€‚

3.  **`Memory`**ï¼šå¯æœç´¢çš„è·¨æœƒè©±ä¿¡æ¯
    *   ä»£è¡¨å¯èƒ½è·¨è¶Š*å¤šå€‹éå»æœƒè©±*çš„ä¿¡æ¯å­˜å„²ï¼Œæˆ–åŒ…å«å¤–éƒ¨æ•¸æ“šæºã€‚
    *   å®ƒå……ç•¶ä¸€å€‹çŸ¥è­˜åº«ï¼Œä»£ç†å¯ä»¥*æœç´¢*è©²çŸ¥è­˜åº«ä»¥å¬å›è¶…å‡ºç«‹å³å°è©±ç¯„åœçš„ä¿¡æ¯æˆ–ä¸Šä¸‹æ–‡ã€‚

## ç®¡ç†ä¸Šä¸‹æ–‡ï¼šæœå‹™ (Services)

ADK æä¾›å¤šç¨®æœå‹™ä¾†ç®¡ç†é€™äº›æ¦‚å¿µï¼š

1.  **`SessionService`**ï¼šç®¡ç†ä¸åŒçš„å°è©±åŸ·è¡Œç·’ï¼ˆ`Session` å°è±¡ï¼‰
    *   è™•ç†ç”Ÿå‘½é€±æœŸï¼šå»ºç«‹ã€æª¢ç´¢ã€æ›´æ–°ï¼ˆé™„åŠ  `Events`ã€ä¿®æ”¹ `State`ï¼‰å’Œåˆªé™¤å–®å€‹ `Session`ã€‚

2.  **`MemoryService`**ï¼šç®¡ç†é•·æœŸçŸ¥è­˜åº« (`Memory`)
    *   è™•ç†å°‡ä¿¡æ¯ï¼ˆé€šå¸¸ä¾†è‡ªå·²å®Œæˆçš„ `Session`ï¼‰æ”å–åˆ°é•·æœŸå­˜å„²ä¸­ã€‚
    *   æä¾›æ ¹æ“šæŸ¥è©¢æœç´¢é€™äº›å­˜å„²çŸ¥è­˜çš„æ–¹æ³•ã€‚

> [!TIP]
> **é–‹ç™¼æç¤º**ï¼šADK ç‚ºé€™å…©ç¨®æœå‹™éƒ½æä¾›äº†**å…§å­˜ä¸­ (In-memory) å¯¦ä½œ**ï¼Œå°ˆç‚º**æœ¬åœ°æ¸¬è©¦å’Œå¿«é€Ÿé–‹ç™¼**è¨­è¨ˆã€‚è«‹è¨˜ä½ï¼Œç•¶æ‡‰ç”¨ç¨‹å¼é‡å•Ÿæ™‚ï¼Œæ‰€æœ‰å­˜å„²åœ¨å…§å­˜ä¸­çš„æ•¸æ“šéƒ½æœƒä¸Ÿå¤±ã€‚å°æ–¼ç”Ÿç”¢ç’°å¢ƒï¼Œè«‹é¸æ“‡é›²ç«¯æˆ–è³‡æ–™åº«å¾Œç«¯ã€‚

### ç¸½çµæ¯”è¼ƒï¼š

| æ¦‚å¿µ | ç„¦é» | ç®¡ç†æœå‹™ |
| :--- | :--- | :--- |
| **`Session` & `State`** | **ç•¶å‰äº’å‹•** â€“ å–®æ¬¡æ´»å‹•å°è©±çš„æ­·å²èˆ‡æ•¸æ“šã€‚ | `SessionService` |
| **`Memory`** | **éå»èˆ‡å¤–éƒ¨ä¿¡æ¯** â€“ å¯è·¨å°è©±æœç´¢çš„å°å­˜å…§å®¹ã€‚ | `MemoryService` |

## ä¸‹ä¸€æ­¥

åœ¨æ¥ä¸‹ä¾†çš„ç« ç¯€ä¸­ï¼Œæˆ‘å€‘å°‡æ·±å…¥æ¢è¨æ¯å€‹çµ„ä»¶ï¼š

*   **`Session`**ï¼šç†è§£å…¶çµæ§‹èˆ‡ `Events`ã€‚
*   **`State`**ï¼šå¦‚ä½•æœ‰æ•ˆåœ°è®€å–ã€å¯«å…¥å’Œç®¡ç†æœƒè©±ç‰¹å®šæ•¸æ“šã€‚
*   **`SessionService`**ï¼šç‚ºæ‚¨çš„æœƒè©±é¸æ“‡æ­£ç¢ºçš„å­˜å„²å¾Œç«¯ã€‚
*   **`MemoryService`**ï¼šæ¢ç´¢å­˜å„²å’Œæª¢ç´¢æ›´å»£æ³›ä¸Šä¸‹æ–‡çš„é¸é …ã€‚

ç†è§£é€™äº›æ¦‚å¿µæ˜¯æ§‹å»ºèƒ½å¤ é€²è¡Œè¤‡é›œã€æœ‰ç‹€æ…‹ä¸”å…·å‚™ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ä»£ç†çš„åŸºç¤ã€‚

---

## åƒè€ƒè³‡æº (å¯¦ä½œåƒè€ƒ)
- [Tutorial 08: State and Memory - Persistent Agent Context (ç‹€æ…‹èˆ‡è¨˜æ†¶é«” - æŒä¹…åŒ–ä»£ç†ä¸Šä¸‹æ–‡)](../../../workspace/notes/google-adk-training-hub/adk_training/08-state_memory.md)
- [ç«¯å°ç«¯å¯¦ä½œ 01ï¼šå…·å‚™å°è©±æŒä¹…æ€§çš„ç”Ÿç”¢ç´šå•†å‹™ä»£ç† (End-to-End Implementation 01: Production Commerce Agent with Session Persistence)](../../../workspace/notes/google-adk-training-hub/adk_training/35-commerce_agent_e2e.md)
- [TIL: åœ¨ Google ADK 1.17 ä¸­è¨»å†Šè‡ªå®šç¾©å°è©±æœå‹™ (Registering Custom Session Services in Google ADK 1.17)](../../../workspace/notes/google-adk-training-hub/blog/2025-10-23-til-custom-session-services.md)